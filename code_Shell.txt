from news.models import *

u1 = User.objects.create(username = 'Jordany')
u2 = User.objects.create(username = 'Boris')

a1 = Author.objects.create(user=u1)
a2 = Author.objects.create(user=u2)

p1 = Post.objects.create(art_new = 'ART', title='ITMO University', text='Hello, my name is Jordany!', author=a1) 
p2 = Post.objects.create(art_new = 'ART', title='The LOTR', text='«Властелин колец» является одним из самых крупных проектов в истории кино. Его реализация заняла восемь лет; все три фильма были сняты одновременно в Новой Зеландии, родной стране Питера Джексона. У каждого из фильмов трилогии есть специальная расширенная версия, выпущенная на DVD спустя год после выхода соответствующей театральной версии. Фильмы следуют за основной сюжетной линией книги, но опускают некоторые существенные элементы повествования, включают дополнения и отклонения от исходного материала.', author=a2)    
p3 = Post.objects.create(art_new = 'NEW', title='MMA', text='20 Февраля бой UFC Джон Джонс проив Шона Омелли', author=a2) 

cat1 = Category.objects.create(title_category = 'SPO')
cat2 = Category.objects.create(title_category = 'POL')
cat3 = Category.objects.create(title_category = 'EDU')
cat4 = Category.objects.create(title_category = 'MUS')

p1.category.add(cat1) 
p1.category.add(cat2) 
p2.category.add(cat2)    
p2.category.add(cat3) 
p2.category.add(cat4) 
p3.category.add(cat1)      
p3.category.add(cat4)   

com1 = Comment.objects.create(post=p1, user=u1, text = 'Ух ты, вааааау! Это моя первая статья')  
com2 = Comment.objects.create(post=p1, user=u2, text = 'А я не знал')
com3 = Comment.objects.create(post=p2, user=u1, text = 'Обожаю Властелин Колец')
com4 = Comment.objects.create(post=p3, user=u1, text = 'В феврале у меня выходные')
com5 = Comment.objects.create(post=p2, user=u2, text = 'Да это просто великолепно!!!')

com1.like()
com2.like()
com3.like()
com4.like()
com3.like()
com3.like()
p1.like()
p2.like()
p3.like()
p2.like()
p3.like()
com1.dislike()
p2.like()

a1.update_rating()
a2.update_rating()

Author.objects.order_by('-rating').values('user__username', 'rating').first()

best_post = Post.objects.order_by('rating') 
best_post.values('time_in', 'author__user__username', 'rating', 'title').last()
best_post.last().preview()

comments_best_posts = Comment.objects.filter(post=best_post.last()).values('time_in', 'user__username', 'rating', 'text')
comments_best_posts